<% videos = @spot.videos %>
<% videos.map do |video| %>
  <% video.votes = video.weighted_score %>
<% end %>
<% top_video = videos.sort_by(&:votes).last %>
<%= cl_video_tag(top_video.video.key, controls: true, width: 300, class: "card-img-top") %>
<div class="video-infos">
  <%= cl_image_tag top_video.user.photo.attached? ? cl_image_path(top_video.user.photo.key) : image_path("https://mobilityoi.org/wp-content/uploads/2015/06/Avatar-No-Photo-generic.jpg"), class: "avatar-bordered" %>
  <div>
    <p><%= top_video.caption %></p>
    <p>Uploaded by: <%= top_video.user.username.capitalize %></p>
  </div>
  <div class="d-flex align-items-center justify-content-center">
    <p class="mr-5"><%= top_video.weighted_score %></p>
    <%= link_to upvote_path(top_video) do %>
      <p><i class="fas fa-thumbs-up"></i></p>
    <% end %>
  </div>
</div>
